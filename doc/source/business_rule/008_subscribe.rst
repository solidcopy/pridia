.. _br-008:

#######################
BR-008 定期購入
#######################

====================
支払のタイミング
====================

定期購入の支払タイミングとして毎月月末、毎月指定日などが考えられる。

システムとして選択肢を限定すると規定のパターンに該当しない支払に対応できないので、
支払タイミングはユーザーが定義できるものとする。

支払タイミングをロジックとして定義するための手段をシステムから提供し、
ユーザーはその手段を用いて支払いタイミングを定義する。

====================
金額
====================

定期購入自体は金額についての情報を持たない。

新たな支払を登録する時、金額は直近の取引と同じになる。
異なる場合は訂正する。

これにより、一度取引の金額を訂正すれば金額が変わらない限り再設定しなくてよい。

=======================
支払タイミングの変更
=======================

支払タイミングは変更できる。

次回の支払日は変更後の支払タイミングと最後の取引が発生した日から計算する。

変更によって過去に記録した取引が支払タイミングの設定と噛み合わなくなってもよい。

==========
支払の追加
==========

定期購入に支払の追加を指示すると、おおよその内容が決まった取引を作ることができる。

| 支払日は登録済みの最後の取引と支払タイミングによって自動的に決められる。
| 不定期なら当日になる。

金額は直近の取引の金額になる。
